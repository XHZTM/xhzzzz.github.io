import{u as E,b as F,e as M,l as D}from"./index-9540d5e7.js";import{q as k,s as N,B as y,x as B,y as U,J as w,a5 as v,ae as C,K as x,Q as g,a2 as V,af as j}from"./main-f7c1aeb0.js";const q={name:"RenderText",props:{itemData:{type:Object,default:()=>({id:"--"})},itemIdToLogicData:{type:Object||void 0,default:()=>{}}},setup(e){const{isSelect:l,style:i,customStyle:t}=E(e),r=F(),b=k("handleTriggerEvent"),u=N(()=>{let a={};const m=e.itemData.attribute;return m.type==="number"?(m.min!==void 0&&(a.min=m.min),m.max!==void 0&&(a.max=m.max),m.step!==void 0&&(a.step=m.step)):m.maxlength!==void 0&&(a.maxlength=m.maxlength),a}),n=y(void 0),o=y(!1),S=()=>{if(e.itemData.styles.focusBorder&&o.value){const a={};return(r.pageMode!=="pc"||M==="position")&&e.itemData.styles.focusBorder.includes("px")?a.border=e.itemData.styles.focusBorder.replaceAll("px","rem"):a.border=e.itemData.styles.focusBorder,a}return{}},h=y(S());B(()=>o.value,()=>{h.value=S()}),B(()=>n.value,()=>{O()}),(()=>{const a=e.itemData.attribute,{type:m,bindVariable:d}=a;d&&r.editerData.variable[d]?n.value=r.editerData.variable[d].value:m==="number"?n.value=e.itemData.attribute.numberValue:n.value=e.itemData.attribute.stringValue})();const s=[],c=[],f=[],I=()=>{e.itemIdToLogicData&&Object.values(e.itemIdToLogicData).forEach(a=>{a.type===D.inputFocus&&s.push(a.id),a.type===D.inputBlur&&c.push(a.id),a.type===D.inputValueChange&&f.push(a.id)})},T=()=>{o.value=!0,s.length>0&&b(s,{value:n.value})},L=()=>{if(o.value=!1,e.itemData.attribute.type==="number"){if(console.log(e.itemData.attribute.step,e.itemData.attribute.max,e.itemData.attribute.min),typeof e.itemData.attribute.step=="number"){const m=n.value;m%e.itemData.attribute.step!=0&&(n.value=Math.round(m/e.itemData.attribute.step)*e.itemData.attribute.step)}const a=n.value;typeof e.itemData.attribute.max=="number"&&a>e.itemData.attribute.max&&(n.value=e.itemData.attribute.max),typeof e.itemData.attribute.min=="number"&&a<e.itemData.attribute.min&&n.value!==""&&(n.value=e.itemData.attribute.min)}c.length>0&&b(c,{value:n.value})},O=()=>{const a=e.itemData.attribute,{type:m,bindVariable:d}=a;d&&r.editerData.variable[d]?r.editerData.variable[d].value=n.value:m==="number"?e.itemData.attribute.numberValue=n.value:e.itemData.attribute.stringValue=n.value,f.length>0&&b(f,{value:n.value})};return U(()=>{I()}),{isSelect:l,style:i,customStyle:t,attrObj:u,focusStyle:h,isFocus:o,inputValue:n,focus:T,blur:L}}},A=["id","name","type","placeholder","disabled"],J=["id","name","type","placeholder","disabled","max","min","step"],K=["id","name","type","placeholder","disabled"];function P(e,l,i,t,r,b){return i.itemData.attribute.type==="textarea"?v((x(),g("textarea",V({key:0,id:i.itemData.id,name:i.itemData.itemName,class:{itemSelect:t.isSelect},style:[t.style,t.customStyle,t.focusStyle],type:i.itemData.attribute.type,placeholder:i.itemData.attribute.placeholder,disabled:i.itemData.attribute.disabled},t.attrObj,{"onUpdate:modelValue":l[0]||(l[0]=u=>t.inputValue=u),onFocus:l[1]||(l[1]=(...u)=>t.focus&&t.focus(...u)),onBlur:l[2]||(l[2]=(...u)=>t.blur&&t.blur(...u))}),null,16,A)),[[C,t.inputValue]]):i.itemData.attribute.type==="number"?v((x(),g("input",V({key:1,id:i.itemData.id,name:i.itemData.itemName,class:{itemSelect:t.isSelect},style:[t.style,t.customStyle,t.focusStyle],type:i.itemData.attribute.type,placeholder:i.itemData.attribute.placeholder,disabled:i.itemData.attribute.disabled,max:i.itemData.attribute.max,min:i.itemData.attribute.min,step:i.itemData.attribute.step,"onUpdate:modelValue":l[3]||(l[3]=u=>t.inputValue=u)},t.attrObj,{autocomplete:"off",onFocus:l[4]||(l[4]=(...u)=>t.focus&&t.focus(...u)),onBlur:l[5]||(l[5]=(...u)=>t.blur&&t.blur(...u))}),null,16,J)),[[j,t.inputValue]]):v((x(),g("input",V({key:2,id:i.itemData.id,name:i.itemData.itemName,class:{itemSelect:t.isSelect},style:[t.style,t.customStyle,t.focusStyle],type:i.itemData.attribute.type,placeholder:i.itemData.attribute.placeholder,disabled:i.itemData.attribute.disabled,"onUpdate:modelValue":l[6]||(l[6]=u=>t.inputValue=u)},t.attrObj,{autocomplete:"off",onFocus:l[7]||(l[7]=(...u)=>t.focus&&t.focus(...u)),onBlur:l[8]||(l[8]=(...u)=>t.blur&&t.blur(...u))}),null,16,K)),[[j,t.inputValue]])}const G=w(q,[["render",P]]);export{G as default};
